/* Copyright (c) 2013 Rohit Sengar, https://www.linkedin.com/in/rohitsengar
 * Readable version: https://docs.google.com/file/d/0B2nDwLtAxbmLRmRkMFE3Z0ZubmM/edit?pli=1 */

(function(a){a.fn.scrollbar=function(e){var f=a.extend({color:"#000",width:10,rounded:!0,opacity:0.7,ratio:1},e);1>a("#scrollstyle").length&&(e=document.createElement("style"),e.type="text/css",e.styleSheet?e.styleSheet.cssText=".scrollarea{ width: 100%; height: auto; } .scrollbar{ position: absolute; width: 10px; display: none; cursor: pointer; } .unselectable { -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; }":e.innerHTML=".scrollarea{ width: 100%; height: auto; } .scrollbar{ position: absolute; width: 10px; display: none; cursor: pointer; } .unselectable { -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; }",
document.getElementsByTagName("head")[0].appendChild(e));return this.each(function(){a(this).css("overflow","hidden").wrapInner('<div class="scrollarea">');if(a(this).height()>=a(".scrollarea",this).eq(0).height())return!1;f.ratio=a(".scrollarea",this).eq(0).height()/a(this).height();a(this).prepend('<div class="scrollbar"></div>');a(".scrollbar",this).eq(0).width(f.width);a(".scrollbar",this).eq(0).css("background-color",f.color);a(".scrollbar",this).eq(0).css("opacity",f.opacity);f.rounded&&a(".scrollbar",
this).eq(0).css("border-radius",f.width/2+"px");var e=a(this).offset().left+a(this).outerWidth()-a(".scrollbar",this).eq(0).outerWidth();a(".scrollbar",this).eq(0).css("left",e+"px");a(".scrollbar",this).eq(0).css("top",a(this).offset().top+"px");a(".scrollbar",this).eq(0).height(a(this).height()/f.ratio);a(".scrollbar",this).eq(0).data("ratio",f.ratio);a(this).scrollTop(0);a(this).data("maxScroll",a(".scrollarea",this).eq(0).height()-a(this).height());a(this).hover(function(){a(".scrollbar",this).eq(0).hasClass(".scroll-dragging")||
a(".scrollbar",this).eq(0).fadeIn()},function(){a(".scrollbar",this).eq(0).hasClass(".scroll-dragging")||a(".scrollbar",this).eq(0).fadeOut()});a(".scrollbar",this).eq(0).mousedown(function(c){a(".scroll-dragging").removeClass("scroll-dragging");a(this).addClass("scroll-dragging");a(this).data("ofTop",c.pageY-a(this).offset().top);a(this).css({top:a(this).offset().top+"px"});a("body").addClass("unselectable")});a("body").mousemove(function(c){var d=c.pageY-a(".scroll-dragging").data("ofTop"),b=a(".scroll-dragging").parent();
if(void 0!=b.offset()){var e=d+a(".scroll-dragging").outerHeight()-2;d>b.offset().top&&e<b.offset().top+b.outerHeight()&&(a(".scroll-dragging").css({top:d+"px"}),d=a(".scroll-dragging").offset().top-b.offset().top,0>d&&(d*=-1),b.scrollTop(d*a(".scroll-dragging").data("ratio")),a(".scroll-dragging").show(),c.preventDefault(),c.stopPropagation())}}).mouseup(function(){a(".scroll-dragging").removeClass("scroll-dragging");a("body").removeClass("unselectable")});e=/Firefox/i.test(navigator.userAgent)?
"DOMMouseScroll":"mousewheel";a(this).bind(e,function(c){c=window.event||c;c=c.originalEvent||c;var d=c.detail?-120*c.detail:c.wheelDelta,b=a(this).scrollTop();0<d/120?(b-=50,0>b?a(this).scrollTop(0):a(this).scrollTop(b)):(b+=50,b>a(this).data("maxScroll")?a(this).scrollTop(a(this).data("maxScroll")):a(this).scrollTop(b));d=b/a(".scrollbar",this).eq(0).data("ratio")+a(this).offset().top;d<a(this).offset().top?a(".scrollbar",this).eq(0).css("top",a(this).offset().top+"px"):(b=a(this).offset().top+
a(this).outerHeight()-a(".scrollbar",this).eq(0).height(),d>b?a(".scrollbar",this).eq(0).css("top",b+"px"):a(".scrollbar",this).eq(0).css("top",d+"px"));if(c.preventDefault)c.preventDefault();else return!1;c.stopPropagation()})})}})(jQuery);
